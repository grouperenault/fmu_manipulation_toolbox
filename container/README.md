# FMU Containers ?

An FMU Container is classical FMU which embeds other's FMU's. See [FMU Container](../doc/container.md)
for user documentation.

From API point of view, an FMUContainer can be seen as
* an FMU: see [`container.c`](container.c), [`fmi2.c`](fmi2.c) and [`fmi3.c`](fmi3.c) which implement the FMI API
* an fmi-importer which can load (see [`fmu.c](fmu.c) and [`library.c`](library.c)) which support fmu-2.0 and fmu-3.0

A configuration file `resource/container.txt` describes
* the container configuration (inputs, outputs, time step, options)
* the routing table which defines how the embedded FMUs are connected together

This file is generated by the [`fmucontainer`](../fmu_manipulation_toolbox/cli/fmucontainer.py) command line tool.
See [`container.py`](../fmu_manipulation_toolbox/container.py) for details on API to create a container.

# Muti-Thread
If enabled through `MT` flag, each FMU has its own thread which
1. fetch its inputs from container buffer which is shared with all FMUs.
2. process `fmi2DoStep()`

Synchronization uses [`thread.c`](thread.c) facilities.

# Profiling 
If enabled through `profiling` flag, each call to `fmi2DoStep` of each FMU is monitored. The elapsed time
is compared with `currentCommunicationPoint` and a RT ratio is computed. A ratio greater than `1.0` means
this particular FMU is faster than RT. (See [`profile.c`](profile.c) for details)
